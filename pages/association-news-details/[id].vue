<template>
    <!-- Header  -->
    <Header />
     <!-- Header  -->
 
     <!-- Association News Details Section  -->
      <div class="association-news-details-section-wrapper">
         <div class="container-fluid">
             <div class="association-news-details-inner-wrapper">
                 <div class="top-date-category-wrapper">
                     <div class="date-wrapper">
                         <h6>2024년 9월 18일</h6>
                     </div>
                     <div class="category-wrapper">
                         <h6>모범 사례</h6>
                     </div>
                 </div>
                 <div class="news-title">
                     <h2>주거용 건물의 투명한 관리 수수료를 위한 모범 사례</h2>
                 </div>
                 <div class="news-image-wrapepr">
                     <img src="/assets/images/associationnewsdetails/association-news-details.png" alt="">
                 </div>
                 <div class="news-content-related-content-wrapper">
                     <div class="news-content-wrapper">
                         <h4>한국건물관리협회는 주거용 건물 관리의 투명성과 공정성을 도모하고자, 투명한 관리비 지급 모범 사례에 대한 포괄적인 가이드를 발표했습니다.</h4>
                         <div class="key-recommendation-wrapper">
                             <h3>주요 권장 사항:</h3>
                             <ul>
                                 <li><p><span>정기 감사 및 보고</span> 정기적으로 내부 감사를 실시하고 그 결과를 주민과 공유함으로써 책임감을 강화할 수 있습니다.</p></li>
                                 <li><p><span>사용량 기반 청구</span> 가능하다면 전기, 수도 등의 공공 서비스에 대한 요금 청구를 지역 기반 요금 청구에서 사용량 기반 요금 청구로 전환하세요.</p></li>
                                 <li><p><span>예산 계획에 주민 참여</span> 연간 예산 계획 과정에 주민을 포함시키면 투명성을 크게 높일 수 있습니다.</p></li>
                             </ul>
                         </div>
                         <div class="matters-wrapper">
                             <h3>투명한 경영이 중요한 이유</h3>
                             <p>투명한 관리 수수료는 건물 관리자와 거주자 간의 긍정적인 관계를 유지하는 데 필수적입니다. 수수료 구조가 명확하고 정당화될 때 분쟁 가능성이 줄어들고 공동 책임감이 생깁니다.</p>
                             <p>투명성은 숨은 비용을 피하는 데 도움이 되며, 거주자가 재정을 보다 예측 가능하게 관리할 수 있도록 해줍니다.</p>
                         </div>
                     </div>
                     <div class="related-content-wrapper">
                         <div class="related-inner-wrapper">
                             <h5>협회의 다른 소식 확인하기</h5>
                             <p>협회의 최신 소식과 업데이트를 확인해보세요.</p>
                             <div class="related-news-box">
                                 <a href="./association-news-details.html">
                                     멤버십을 위한 새로운 혜택 및 서비스
                                     <div class="icon">
                                         <span class="material-symbols-outlined">
                                             arrow_right_alt
                                         </span>
                                     </div>
                                 </a>
                                 <a href="./association-news-details.html">
                                     최근 정부 정책 변화에서 얻은 10가지 주요 통찰력
                                     <div class="icon">
                                         <span class="material-symbols-outlined">
                                             arrow_right_alt
                                         </span>
                                     </div>
                                 </a>
                                 <a href="./association-news-details.html">
                                     투명경영을 위한 새로운 디지털 플랫폼 출시
                                     <div class="icon">
                                         <span class="material-symbols-outlined">
                                             arrow_right_alt
                                         </span>
                                     </div>
                                 </a>
                             </div>
                             <div class="explore-more-btn">
                                 <a href="./association-news-details.html">모든 협회소식 보기</a>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
      </div>
     <!-- Association News Details Section  -->
 
 
 
 
 
     <!-- Footer  -->
     <footer class="footer-section">
         <div class="container-fluid">
             <div class="footer-inner">
                 <div class="left-logo-box">
                     <a href="#">
                         <img src="/assets/images/footer-logo.svg" alt="">
                         대한건물관리협회
                     </a>
                 </div>
                 <div class="foote-details">
                     <div class="title">
                         <h4>사단법인 대한건물관리협회(KBMS)</h4>
                     </div>
                     <div class="footer-address">
                         <p>경기도 안산시 단원구 중앙대로 831, 24층 2420호</p>
                         <p>연락처 : 02-545-0000</p>
                         <p class="last-para">이메일 : <a href="mailto:biz@gmail.com">biz@gmail.com</a></p>
                     </div>
                 </div>
                 <div class="footer-link">
                     <div class="title">
                         <h4></h4>
                     </div>
                     <div class="footer-right-address">
                         <p>협회장ㅣ김동현</p>
                         <p>개인정보보호책임자ㅣ관리자</p>
                         <p class="last-para">사업자등록번호ㅣ800-55-54842</p>
                     </div>
                 </div>
             </div>
         </div>
         <div class="footer-copyright">
             <p class="copyright-desktop">© 2024 Korean Building Maintenance Society. All Right Reserved</p>
             <p class="copyright-mobile">© 2024 Building Management.<br /> All Right Reserved</p>
         </div>
     </footer>
     <!-- Footer  -->
          <!-- Modal -->
     <!-- Modal -->
     <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
         <div class="modal-dialog modal-dialog-centered">
             <div class="modal-content">
                 <div class="modal-body">
                     <div class="login-popup-inner-wrapper">
                         <div class="top-image-box">
                             <img src="/assets/images/login-popup-image.svg" alt="">
                         </div>
                         <div class="center-content">
                             <h3>분쟁 해결 요청을 위해 <br />로그인이 필요합니다.</h3>
                             <p>요청을 제출하려면 로그인이 필요합니다. <br />계속 진행하려면 로그인하거나 회원가입을 해주세요.</p>
                         </div>
                         <div class="login-signup-btn-wrapper">
                             <a href="/sign-in">로그인</a>
                             <a href="/sign-up">회원가입</a>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
        
     </div>
     <!-- Login Modal  -->
 </template>

<script setup>
const route = useRoute()
const runtimeConfig = useRuntimeConfig();
const id = route.params.id
const loading = ref(true)
const news = ref(null)

const imageWidth = ref("740px");


onMounted(() => {
    updateImageWidth();
  getData(id);
  window.addEventListener("resize", updateImageWidth);
})

async function getData(id){

    try{
        const res = await $fetch(`${runtimeConfig.public.apiBase}news/${id}`, {
    method: 'GET',
});

news.value = await res.data
    loading.value = false
  }
  catch (e){
     console.error(e)
     loading.value = false
  }

}

function styleImages(html, styles) {
  const styleString = Object.entries(styles)
    .map(([key, value]) => `${key}: ${value};`)
    .join(" ");
  
  return html.replace(/<img([^>]*)>/gi, `<img style="${styleString}" $1>`);
}

function  formatTimestamp(timestamp) {
      return new Date(timestamp).toLocaleString(); 
}

   // Function to update image width based on screen size
   const updateImageWidth = () => {
      if (window.innerWidth <= 991) {
        imageWidth.value = "390px";
      } else {
        imageWidth.value = "740px";
      }
    };



    const styledBody = computed(() => 
      styleImages(news.value.body, { width: imageWidth.value, "border-radius": "10px" })
    );

</script>